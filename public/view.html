<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
	<link rel="stylesheet" type="text/css" href="css/app.min.css">
	<link rel="stylesheet" type="text/css" href="css/vendor.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.min.css">
	<link rel="stylesheet" type="text/css" href="plugins/jquery-ui/css/jquery-ui.css">
	<script src="plugins/jquery/jquery.min.js"></script>
	<script src="plugins/jquery-ui/js/jquery-ui.js"></script>
</head>
<body>
    <main class="m-2">
        <div class="row">
            <label class="form-label col-form-label col-2">Gender</label>
            <div class="col-3 pt-2">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="gender1" name="gender" value="man" checked>
                    <label class="form-check-label" for="gender1">Man</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" id="gender2" name="gender" value="woman">
                    <label class="form-check-label" for="gender2">Woman</label>
                </div>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-6">
                <div class="panel panel-inverse">
                    <div class="panel-heading">
                        <h4 class="panel-title">Player information</h4>
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-success" data-toggle="panel-reload" ><i class="fa fa-redo"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-warning" data-toggle="panel-collapse" ><i class="fa fa-minus"></i></a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <!-- Player 1 -->
                        <div class="row">
                            <!-- Player 1 -->
                            <div class="col-6">
                                <div class="form-floating">
                                    <input id="player_1" name="player_name" class="form-control fs-15px"/>
                                    <label for="player_1" class="d-flex align-items-center fs-13px">Player 1<span class="text-danger ms-1">*</span></label>
                                </div>
                            </div>
                            <!-- * Player 1 -->

                            <!-- Rating Elo -->
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_h_elo_1" name="rating_h_elo_1" class="form-control fs-15px elo-selected" value="209" readonly/>
                                    <label for="rating_h_elo_1" class="d-flex align-items-center fs-13px">H Elo</label>
                                </div>
                            </div>
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_c_elo_1" name="rating_c_elo_1" class="form-control fs-15px" readonly/>
                                    <label for="rating_c_elo_1" class="d-flex align-items-center fs-13px">C Elo</label>
                                </div>
                            </div>
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_g_elo_1" name="rating_g_elo_1" class="form-control fs-15px" readonly/>
                                    <label for="rating_g_elo_1" class="d-flex align-items-center fs-13px">G Elo</label>
                                </div>
                            </div>
                            <!-- * Rating Elo -->
                        </div>
                        <!-- * Player 1 -->

                        <!-- Player 2 -->
                        <div class="row mt-2">
                            <div class="col-6">
                                <div class="form-floating">
                                    <input id="player_2" name="player_name" class="form-control fs-15px"/>
                                    <label for="player_2" class="d-flex align-items-center fs-13px">Player 2<span class="text-danger ms-1">*</span></label>
                                </div>
                            </div>
                            
                            <!-- Rating Elo -->
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_h_elo_2" name="rating_h_elo_2" class="form-control fs-15px elo-selected" readonly/>
                                    <label for="rating_h_elo_2" class="d-flex align-items-center fs-13px">H Elo</label>
                                </div>
                            </div>
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_c_elo_2" name="rating_c_elo_2" class="form-control fs-15px" readonly/>
                                    <label for="rating_c_elo_2" class="d-flex align-items-center fs-13px">C Elo</label>
                                </div>
                            </div>
                            <div class="col-2 p-0 pe-1">
                                <div class="form-floating">
                                    <input id="rating_g_elo_2" name="rating_g_elo_2" class="form-control fs-15px" readonly/>
                                    <label for="rating_g_elo_2" class="d-flex align-items-center fs-13px">G Elo</label>
                                </div>
                            </div>
                            <!-- * Rating Elo -->
                        </div>
                        <!-- * Player 2 -->

                        <!-- Type -->
                        <div class="row mt-2">
                            <div class="col-12">
                                <div class="form-floating">
                                    <select id="type" class="form-control fs-15px">
                                        <option value="1">Hard</option>
                                        <option value="2">Clay</option>
                                        <option value="3">Grass</option>
                                    </select>
                                    <label for="type" class="d-flex align-items-center fs-13px">Type</label>
                                </div>
                            </div>
                        </div>
                        <!-- * Type -->
                    </div>
                </div>

                <div class="panel panel-inverse">
                    <div class="panel-heading">
                        <h4 class="panel-title">Result</h4>
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-success" data-toggle="panel-reload" ><i class="fa fa-redo"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-warning" data-toggle="panel-collapse" ><i class="fa fa-minus"></i></a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-12">
                                <div class="table-responsive">
                                    <table class="table table-bordered mb-0">
                                        <thead>
                                            <tr>
                                                <th>Outcome</th>
                                                <th>Probability</th>
                                                <th>Fraction</th>
                                                <th>Decimal</th>
                                                <th>American</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Player 1 win</td>
                                                <td>0.456933507</td>
                                                <td>0.</td>
                                                <td>0.</td>
                                                <td>0.</td>
                                            </tr>
                                            <tr>
                                                <td>Player 2 win</td>
                                                <td>0.543066493</td>
                                                <td>0.</td>
                                                <td>0.</td>
                                                <td>0.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-6">
                <div class="panel panel-inverse">
                    <div class="panel-heading">
                        <h4 class="panel-title">Players</h4>
                        <div class="panel-heading-btn">
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-success" data-toggle="panel-reload" ><i class="fa fa-redo"></i></a>
                            <a href="javascript:;" class="btn btn-xs btn-icon btn-warning" data-toggle="panel-collapse" ><i class="fa fa-minus"></i></a>
                        </div>
                    </div>
                    <div class="panel-body" style="height: 85vh; overflow-y: scroll;">
                        <div class="row">
                            <div class="col-12">
                                <div class="table-responsive">
                                    <table id="tbl-players" class="table table-bordered mb-0">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Player</th>
                                                <th>Age</th>
                                                <th>Elo</th>
                                                <th>hElo</th>
                                                <th>cElo</th>
                                                <th>gElo</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="text-center" colspan="100%">No data !!!</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    

</body>
<script>
	var dataset = {}	

    window.bridge.sendSettings((event, settings) => {
    	dataset = settings
        loadPlayers()
    });

    function loadPlayers(){
        const gender = $(`input[name=gender]:checked`).val()
        const data = dataset.tennis[gender]
        
        if(data.length > 0){
        	$("#tbl-players tbody").html("")
	        for(var i = 0; i < data.length; i++){
	            $("#tbl-players tbody").append(`
	                <tr>
	                    <td>${i+1}</td>
	                    <td><label class="mw-80px text-truncate" title="${data[i].name}">${data[i].name}</label></td>
	                    <td>${data[i].age}</td>
	                    <td>${data[i].elo}</td>
	                    <td>${data[i].hElo}</td>
	                    <td>${data[i].cElo}</td>
	                    <td>${data[i].gElo}</td>
	                </tr>
	            `)
	        }
	        var names = data.map(function(item) {
				return item.name;
			});
	        $("input[name=player_name]").autocomplete({source: names})
        }else{
        	$("#tbl-players tbody").html(`<tr><td class="text-center" colspan="100%">No data !!!</td></tr>`)
        }
    }

    $(document).ready(function(){
    	init()
    })

    function init(){
    	actionView()
    }

    function actionView(){
    	$("input[name=gender]").change(function(){
    		const gender = $(this).val()
    		loadPlayers()
    	})
    	$(`input[name=player_name]`).change(function(){
    		console.log($(this).val())
    	})
    }
</script>
</html>